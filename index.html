<!DOCTYPE html>
<html>
<head>
  <title>Auringon korkeuskulmat Jyväskylässä</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'  type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Merriweather" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Acme" rel="stylesheet">
   <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

<link href="https://fonts.googleapis.com/css2?family=Crete+Round" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans&family=Patua+One&family=Vidaloka" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://cdn.plot.ly/plotly-2.8.3.min.js"></script>
  <link rel="icon" href="logo.png">
<style>


body {
    max-width: 85%;
    margin: auto;
    -webkit-animation-delay: 0.1s;
    -webkit-animation-name: fontfix;
    -webkit-animation-duration: 0.1s;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-timing-function: linear;
}

@-webkit-keyframes fontfix {
    from { opacity: 1; }
    to   { opacity: 1; }
}

.navbar {
  overflow: hidden;
  background-color: #b1f1f1;
  position: fixed;
  top: 0;
  width: 100%;
}

#header {
  width: 100%;
  height: auto;
}


#blaa {
  font-size: 16px;
  background-color: #94dcf2;
  padding-left: 40px;
  padding-right: 40px;
  border-radius: 8px;
}

#bottom {
  font-size: 12px;
  bottom: 0px;
}

}

#plot {
  max-width: 100%;
  text-align: left;
  margin: auto;
}

#otsikko {
  margin: auto;
  max-width: 70%;
}

</style>
</head>

<body>
<div class="content">
<h2 id="otsikko">Auringon päiväkohtaiset maksimikorkeuskulmat Jyväskylässä vuonna 2022</h2>
<br>
<div id='plot'></div>
<p id="blaa"></p>
<br>
<p id="bottom">Datan lähde: timeanddate.com</p>

</div>

<script>

var months = ["Tammikuu", "Helmikuu", "Maaliskuu", "Huhtikuu", "Toukokuu", "Kesäkuu", "Heinäkuu", "Elokuu", "Syyskuu", "Lokakuu", "Marraskuu", "Joulukuu"];
var month_starts = [1, 32, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335];
var real_angles = ['4.9', '5.0', '5.1', '5.2', '5.3', '5.4', '5.6', '5.7', '5.8', '6.0', '6.1', '6.3', '6.4', '6.6', '6.8', '7.0', '7.2', '7.4', '7.6', '7.8', '8.0', '8.2', '8.5', '8.7', '8.9', '9.2', '9.4', '9.7', '10.0', '10.2', '10.5', '10.8', '11.1', '11.4', '11.7', '12.0', '12.3', '12.6', '12.9', '13.2', '13.5', '13.9', '14.2', '14.5', '14.9', '15.2', '15.6', '15.9', '16.2', '16.6', '17.0', '17.3', '17.7', '18.0', '18.4', '18.8', '19.2', '19.5', '19.9', '20.3', '20.7', '21.1', '21.4', '21.8', '22.2', '22.6', '23.0', '23.4', '23.8', '24.2', '24.5', '24.9', '25.3', '25.7', '26.1', '26.5', '26.9', '27.3', '27.7', '28.1', '28.5', '28.9', '29.3', '29.7', '30.1', '30.5', '30.8', '31.2', '31.6', '32.0', '32.4', '32.8', '33.2', '33.5', '33.9', '34.3', '34.7', '35.1', '35.4', '35.8', '36.2', '36.5', '36.9', '37.3', '37.6', '38.0', '38.3', '38.7', '39.0', '39.4', '39.7', '40.0', '40.4', '40.7', '41.0', '41.4', '41.7', '42.0', '42.3', '42.6', '42.9', '43.2', '43.5', '43.8', '44.1', '44.4', '44.6', '44.9', '45.2', '45.4', '45.7', '46.0', '46.2', '46.4', '46.7', '46.9', '47.1', '47.4', '47.6', '47.8', '48.0', '48.2', '48.4', '48.6', '48.8', '48.9', '49.1', '49.3', '49.4', '49.6', '49.7', '49.9', '50.0', '50.1', '50.2', '50.3', '50.4', '50.5', '50.6', '50.7', '50.8', '50.9', '50.9', '51.0', '51.0', '51.1', '51.1', '51.2', '51.2', '51.2', '51.2', '51.2', '51.2', '51.2', '51.2', '51.2', '51.1', '51.1', '51.0', '51.0', '50.9', '50.9', '50.8', '50.7', '50.6', '50.5', '50.4', '50.3', '50.2', '50.1', '50.0', '49.8', '49.7', '49.6', '49.4', '49.3', '49.1', '48.9', '48.8', '48.6', '48.4', '48.2', '48.0', '47.8', '47.6', '47.4', '47.2', '46.9', '46.7', '46.5', '46.2', '46.0', '45.7', '45.5', '45.2', '45.0', '44.7', '44.4', '44.1', '43.9', '43.6', '43.3', '43.0', '42.7', '42.4', '42.1', '41.8', '41.4', '41.1', '40.8', '40.5', '40.2', '39.8', '39.5', '39.1', '38.8', '38.5', '38.1', '37.8', '37.4', '37.1', '36.7', '36.3', '36.0', '35.6', '35.3', '34.9', '34.5', '34.1', '33.8', '33.4', '33.0', '32.6', '32.3', '31.9', '31.5', '31.1', '30.7', '30.4', '30.0', '29.6', '29.2', '28.8', '28.4', '28.0', '27.6', '27.3', '26.9', '26.5', '26.1', '25.7', '25.3', '24.9', '24.5', '24.1', '23.8', '23.4', '23.0', '22.6', '22.2', '21.8', '21.5', '21.1', '20.7', '20.3', '20.0', '19.6', '19.2', '18.9', '18.5', '18.1', '17.8', '17.4', '17.1', '16.7', '16.3', '16.0', '15.7', '15.3', '15.0', '14.6', '14.3', '14.0', '13.7', '13.3', '13.0', '12.7', '12.4', '12.1', '11.8', '11.5', '11.2', '10.9', '10.7', '10.4', '10.1', '9.8', '9.6', '9.3', '9.1', '8.8', '8.6', '8.4', '8.1', '7.9', '7.7', '7.5', '7.3', '7.1', '6.9', '6.7', '6.6', '6.4', '6.2', '6.1', '5.9', '5.8', '5.6', '5.5', '5.4', '5.3', '5.2', '5.1', '5.0', '4.9', '4.8', '4.8', '4.7', '4.7', '4.6', '4.6', '4.5', '4.5', '4.5', '4.5', '4.5', '4.5', '4.5', '4.5', '4.6', '4.6', '4.7', '4.7', '4.8', '4.8'];

function solar_elevation(latitude) {
    let equinox_angle = 90 - latitude;
    let axial_tilt = 23.5;
    var angles = "";
    var summersolstice = 0.5;
    var month = 0;
    angles += months[0] + "\n";
    for (var d=1; d<366; d++) {
       var day = (d+10)/365;
       var dayvalue = Math.PI*(day+(day-summersolstice));
       //console.log(day, dayvalue);
       var angle = equinox_angle + axial_tilt*Math.sin(dayvalue);
       var month_num = month + 1;
       var day_num = d-month_starts[month]+1;
       angles += day_num+"."+month_num + ".: " + angle.toFixed(3) + " ";
       if (month_starts.includes(d+1, month+1)) {
         month += 1;
         angles += months[month] + "\n";
       }
    }
    return angles;
}


var today = new Date();
var month = today.getMonth();
var date = today.getDate();
var year = today.getYear() + 1900;
var day_of_year = month_starts[month]+date-2;
var day_string = date+". "+months[month]+"ta " + year;

var month_ind = 0;
var xlabels = [];
for (var i = 0; i<365; i++) {
  if (month_starts.includes(i+1, month_ind+1)) {
    month_ind += 1;
  }
   var day_i =i-month_starts[month_ind]+2;
   var month_real = month_ind + 1;
   var date_formatted = day_i+"."+month_real+"."+year;
   xlabels.push(date_formatted);
}



var solarangles = {
 x: xlabels,
 y: real_angles,
 hoverlabel: {namelength :-1},
 hoverinfo: "x: y",
 name: 'Auringon kulma'
//  type: 'scatter'

};

var todaysmarker = {
  x: [xlabels[day_of_year]],
  y: [real_angles[day_of_year]],
  hoverlabel: {namelength :-1},
  marker: {
  size: 15,
  line: {
  color: 'rgb(0,0,0)',
  width: 2
}
},
  mode: 'markers',
  type: 'scatter',
  name: 'Auringon kulma tänään (' + day_string + ")"
};

var layout = {
  xaxis: {
     autorange: false,
     tickvals: xlabels,
     type: 'date'
   },
   yaxis: {
   autorange: true,
   type: 'linear'
 }
};

var config = {responsive: true}

var data = [solarangles, todaysmarker];
Plotly.newPlot('plot', data, config);

document.getElementById('blaa').innerHTML = day_string + ": auringon kulma " + real_angles[day_of_year] + " astetta.";

</script>
</body>
</html>
